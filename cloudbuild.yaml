steps:
  - id: 'tf init'
    name: 'hashicorp/terraform:1.0.0'
    entrypoint: sh
    args: ["-c","terraform init -upgrade "]
  - id: 'tf plan'
    name: 'hashicorp/terraform:1.0.0'
    entrypoint: sh
    args: ["-c","terraform plan"]    
  - id: 'tf apply'
    name: 'hashicorp/terraform:1.0.0'
    entrypoint: sh
    args: ["-c","terraform apply -auto-approve"]    
options:
  env: 
    - 'TF_VAR_project_id=$PROJECT_ID'
    - 'TF_VAR_region=${_region}'
    - 'TF_VAR_zone=${_zone}'
    - 'TF_VAR_node_size=${_node_size}'
    - 'TF_VAR_node_pool_size=${_node_pool_size}'